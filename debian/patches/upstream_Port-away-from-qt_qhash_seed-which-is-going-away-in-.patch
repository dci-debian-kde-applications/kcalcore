From 93b2da839a298aab705c1865ee65e009aef53a55 Mon Sep 17 00:00:00 2001
From: David Faure <faure@kde.org>
Date: Wed, 15 Mar 2017 08:47:53 +0100
Subject: [PATCH] Port away from qt_qhash_seed which is going away in Qt 5.9

https://codereview.qt-project.org/188474
---
 autotests/readandwrite.cpp | 5 +----
 1 file changed, 1 insertion(+), 4 deletions(-)

diff --git a/autotests/readandwrite.cpp b/autotests/readandwrite.cpp
index 0c3e969d3..8ebd0cbd9 100644
--- a/autotests/readandwrite.cpp
+++ b/autotests/readandwrite.cpp
@@ -36,11 +36,9 @@
 
 using namespace KCalCore;
 
-extern Q_CORE_EXPORT QBasicAtomicInt qt_qhash_seed; // from qhash.cpp
-
 int main(int argc, char **argv)
 {
-    qt_qhash_seed.fetchAndStoreRelaxed(0); // Disable QHash randomness
+    qSetGlobalQHashSeed(0); // Disable QHash randomness
 
     QCommandLineParser parser;
     parser.addOption(QCommandLineOption(QStringList() << QStringLiteral("verbose"), i18n("Verbose output")));
@@ -58,7 +56,6 @@ int main(int argc, char **argv)
     QCoreApplication::setApplicationVersion(QStringLiteral("0.1"));
     parser.process(app);
     about.processCommandLine(&parser);
-    // KComponentData componentData(&about);   // needed by KConfig used by KSaveFile TODO: still needed ?
 
     const QStringList parsedArgs = parser.positionalArguments();
     if (parsedArgs.count() != 2) {
-- 
2.15.1

